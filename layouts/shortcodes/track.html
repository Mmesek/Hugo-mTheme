<!-- Modified. Inspired by https://brandonrozek.com/blog/displaying-hikes-with-gpxstudio/ -->
<!-- Grab the filename and append it to the base url -->
{{ $gpxFile := .Get 0}}
{{ $url := cond (hasPrefix $gpxFile "http") $gpxFile (printf "%s%s" $.Page.Permalink $gpxFile) }}
<!-- Make the state={...} URL friendly -->
{{ $url_state := querify "state" (printf "{\"urls\":[\"%s\"]}" $url) }}
<!-- Create the Iframe -->
{{ $iframe_url := printf "https://gpx.studio/?%s&embed&distance" $url_state }}
<!-- Output the IFrame -->
<iframe src="{{ $iframe_url | safeHTMLAttr }}"
    width="100%"
    height="500"
    frameborder="0">
</iframe>
